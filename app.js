const Discord = require("discord.js");
const client = new Discord.Client();
const config = require('./config.json');
const command = require('./commandHandle');
const unicodeList = require('./content/unicode.json')
charEmojis = {
    a0:  'ðŸ‡¦',  a1:  '<:a1:772227014052413441>',  a2:  '<:a2:772260197250498570>',  a3:  '<:a3:772266535880228896>',  a4:  '<:a4:772271724648857610>',  a5:  '<:a5:772273128931983402>',
    b0:  'ðŸ‡§',  b1:  '<:b1:772227014425313280>',  b2:  '<:b2:772260197246304337>',  b3:  '<:b3:772266536076836914>',  b4:  '<:b4:772271724657246258>',  b5:  '<:b5:772273129325199371>',
    c0:  'ðŸ‡¨',  c1:  '<:c1:772227014270386228>',  c2:  '<:c2:772260196822810675>',  c3:  '<:c3:772266536030568479>',  c4:  '<:c4:772271724812828682>',  c5:  '<:c5:772273129354952704>',
    d0:  'ðŸ‡©',  d1:  '<:d1:772227014379307028>',  d2:  '<:d2:772260196944183317>',  d3:  '<:d3:772266536123236352>',  d4:  '<:d4:772271724631949313>',  d5:  '<:d5:772273129342763018>',
    e0:  'ðŸ‡ª',  e1:  '<:e1:772227014207602689>',  e2:  '<:e2:772260197254692864>',  e3:  '<:e3:772266536081424414>',  e4:  '<:e4:772271724624478208>',  e5:  '<:e5:772273129422192640>',
    f0:  'ðŸ‡«',  f1:  '<:f1:772227013955158038>',  f2:  '<:f2:772260196922687489>',  f3:  '<:f3:772266535854407693>',  f4:  '<:f4:772271724657508352>',  f5:  '<:f5:772273129346301962>',
    g0:  'ðŸ‡¬',  g1:  '<:g1:772227014446415923>',  g2:  '<:g2:772260197120344095>',  g3:  '<:g3:772266536131362847>',  g4:  '<:g4:772271724782682112>',  g5:  '<:g5:772273129464004658>',
    h0:  'ðŸ‡­',  h1:  '<:h1:772227014593609758>', h2:  '<:h2:772260197237653524>',  h3:  '<:h3:772266535867252757>',  h4:  '<:h4:772271724741132288>',  h5:  '<:h5:772273129513943101>',
    i0:  'ðŸ‡®',  i1:  '<:i1:772227014429245440>',  i2:  '<:i2:772260197108154369>',  i3:  '<:i3:772266536207122442>',  i4:  '<:i4:772271724649250826>',  i5:  '<:i5:772273129048768524>',
    j0:  'ðŸ‡¯',  j1:  '<:j1:772227014051758081>',  j2:  '<:j2:772260197255217162>',  j3:  '<:j3:772266535661076481>',  j4:  '<:j4:772271724740739142>',  j5:  '<:j5:772273129341845505>',
    k0:  'ðŸ‡°',  k1:  '<:k1:772227014294765629>',  k2:  '<:k2:772260197246173194>',  k3:  '<:k3:772266535879835659>',  k4:  '<:k4:772271724703252481>',  k5:  '<:k5:772273129376186398>',
    l0:  'ðŸ‡±',  l1:  '<:l1:772227014148751391>',  l2:  '<:l2:772260197292310578>',  l3:  '<:l3:772266536072904734>',  l4:  '<:l4:772271724690800650>',  l5:  '<:l5:772273129350496276>',
    m0:  'ðŸ‡²',  m1:  '<:m1:772227014374588452>',  m2:  '<:m2:772260197136596993>',  m3:  '<:m3:772266535926497281>',  m4:  '<:m4:772271724648464424>',  m5:  '<:m5:772273129409347594>',
    n0:  'ðŸ‡³',  n1:  '<:n1:772227014148620299>',  n2:  '<:n2:772260197325602826>',  n3:  '<:n3:772266536094138368>',  n4:  '<:n4:772271724657246259>',  n5:  '<:n5:772273129354952734>',
    o0:  'ðŸ‡´',  o1:  '<:o1:772227014119522318>',  o2:  '<:o2:772260197287723038>',  o3:  '<:o3:772266536056258561>',  o4:  '<:o4:772271724334415873>',  o5:  '<:o5:772273129028190219>',
    p0:  'ðŸ‡µ',  p1:  '<:p1:772227014279168082>',  p2:  '<:p2:772260197309218856>',  p3:  '<:p3:772266535816527883>',  p4:  '<:p4:772271724657246268>',  p5:  '<:p5:772273128981528578>',
    q0:  'ðŸ‡¶',  q1:  '<:q1:772227014467911721>',  q2:  '<:q2:772260197292310558>',  q3:  '<:q3:772266535800012832>',  q4:  '<:q4:772271724645187605>',  q5:  '<:q5:772273129359278090>',
    r0:  'ðŸ‡·',  r1:  '<:r1:772227014479708190>',  r2:  '<:r2:772260197325602906>',  r3:  '<:r3:772266536131362817>',  r4:  '<:r4:772271724410568715>',  r5:  '<:r5:772273129174597643>',
    s0:  'ðŸ‡¸',  s1:  '<:s1:772227014299222057>',  s2:  '<:s2:772260197334908928>',  s3:  '<:s3:772266536169242624>',  s4:  '<:s4:772271724711641099>',  s5:  '<:s5:772273129397551115>',
    t0:  'ðŸ‡¹',  t1:  '<:t1:772227014576046080>',  t2:  '<:t2:772260196986650665>',  t3:  '<:t3:772266536122843166>',  t4:  '<:t4:772271724666421258>',  t5:  '<:t5:772273129429925928>',
    u0:  'ðŸ‡º',  u1:  '<:u1:772227014554812476>',  u2:  '<:u2:772260197368332298>',  u3:  '<:u3:772266536114061312>',  u4:  '<:u4:772271724460245005>',  u5:  '<:u5:772273129468854342>',
    v0:  'ðŸ‡»',  v1:  '<:v1:772227014618513438>',  v2:  '<:v2:772260197288378428>',  v3:  '<:v3:772266535891763201>',  v4:  '<:v4:772271724750307348>',  v5:  '<:v5:772273129258876939>',
    w0:  'ðŸ‡¼',  w1:  '<:w1:772227014463455262>',  w2:  '<:w2:772260197300174878>',  w3:  '<:w3:772266535895957525>',  w4:  '<:w4:772271724678086656>', w5:  '<:w5:772273129099100221>',
    x0:  'ðŸ‡½',  x1:  '<:x1:772227014634504202>',  x2:  '<:x2:772260197044322336>',  x3:  '<:x3:772266536122843206>',  x4:  '<:x4:772271724397592577>',  x5:  '<:x5:772273129489694760>',
    y0:  'ðŸ‡¾',  y1:  '<:y1:772227014555729941>',  y2:  '<:y2:772260197322326026>',  y3:  '<:y3:772266536127168522>',  y4:  '<:y4:772271724405850143>',  y5:  '<:y5:772273129065676832>',
    z0:  'ðŸ‡¿',  z1:  '<:z1:772227014517850164>',  z2:  '<:z2:772260197380521984>',  z3:  '<:z3:772266535796211723>',  z4:  '<:z4:772271724653051944>',  z5:  '<:z5:772273129429925938>',
    blank0:  '<:blank0:772264180568948736>',  blank1:  '<:blank1:772264279897407508>',  blank2:  '<:blank2:772264325154078730>',  blank3:  '<:blank3:772264310542041110>',  blank4:  '<:blank4:772264377155190784>',  blank5:  '<:blank5:772264417000685579>',
    '00': '0\ufe0f\u20e3',    '01': '<:01:773091586195456020>',    '02': '<:02:773095866281885696>',    '03': '<:03:773096704349306920>',    '04': '<:04:773096903734460427>',    '05': '<:05:773097751637655622>',    '06': '<:06:773097948476473374>',
    '10': '1\ufe0f\u20e3',    '11': '<:11:773091585981677579>',    '12': '<:12:773095866213990411>',    '13': '<:13:773096704266076161>',    '14': '<:14:773096904061222912>',    '15': '<:15:773097751503175680>',    '16': '<:16:773097948380528640>',
    '20': '2\ufe0f\u20e3',    '21': '<:21:773091585927282698>',    '22': '<:22:773095866323828736>',    '23': '<:23:773096703946653717>',    '24': '<:24:773096904057028608>',    '25': '<:25:773097751080337429>',    '26': '<:26:773097948476211200>',
    '30': '3\ufe0f\u20e3',    '31': '<:31:773091585993736212>',    '32': '<:32:773095866318979072>',    '33': '<:33:773096704324141056>',    '34': '<:34:773096904007221249>',    '35': '<:35:773097751415095357>',    '36': '<:36:773097948393373696>',
    '40': '4\ufe0f\u20e3',    '41': '<:41:773091585881145374>',    '42': '<:42:773095866247675905>',    '43': '<:43:773096704027262977>',    '44': '<:44:773096904061485066>',    '45': '<:45:773097751168155650>',    '46': '<:46:773097948140929035>',
    '50': '5\ufe0f\u20e3',    '51': '<:51:773091585968963595>',    '52': '<:52:773095866340343818>',    '53': '<:53:773096704316276756>',    '54': '<:54:773096903985725451>',    '55': '<:55:773097751457955850>',    '56': '<:56:773097948372271114>',
    '60': '6\ufe0f\u20e3',    '61': '<:61:773091586107768862>',    '62': '<:62:773095866113982475>',    '63': '<:63:773096704114556949>',    '64': '<:64:773096904045101066>',    '65': '<:65:773097751092265011>',    '66': '<:66:773097948103704579>',
    '70': '7\ufe0f\u20e3',    '71': '<:71:773091586137129000>',    '72': '<:72:773095866390675467>',    '73': '<:73:773096704307101706>',    '74': '<:74:773096904062009394>',    '75': '<:75:773097751637524480>',    '76': '<:76:773097948480798730>',
    '80': '8\ufe0f\u20e3',    '81': '<:81:773091585936195604>',    '82': '<:82:773095866491863050>',    '83': '<:83:773096704101974037>',    '84': '<:84:773096904031469578>',    '85': '<:85:773097751004708906>',    '86': '<:86:773097948400844810>',
    '90': '9\ufe0f\u20e3',    '91': '<:91:773091585915224084>',    '92': '<:92:773095866126696480>',    '93': '<:93:773096704014417952>',    '94': '<:94:773096904166604810>',    '95': '<:95:773097751566876752>',    '96': '<:96:773097948204105749>',
}


client.on('ready', () => {
    
    console.log('loaded');
    client.user.setActivity('!reactmessage', { type: 'PLAYING'} )
    command(client, 'reactmessage', message => {
        reactMsg = message.content.slice(13);
        sendError = false;
        charLenght = reactMsg.length;
        reactChars = reactMsg.split('');
        numVars = [
            'aNum', 0,
            'bNum', 0,
            'cNum', 0,
            'dNum', 0,
            'eNum', 0,
            'fNum', 0,
            'gNum', 0,
            'hNum', 0,
            'iNum', 0,
            'jNum', 0,
            'kNum', 0,
            'lNum', 0,
            'mNum', 0,
            'nNum', 0,
            'oNum', 0,
            'pNum', 0,
            'qNum', 0,
            'rNum', 0,
            'sNum', 0,
            'tNum', 0,
            'uNum', 0,
            'vNum', 0,
            'wNum', 0,
            'xNum', 0,
            'yNum', 0,
            'zNum', 0,
            ' Num', 0,
            '!Num', 0,
            '.Num', 0,
            '/Num', 0,
            '?Num', 0,
            '1Num', 0,
            '2Num', 0,
            '3Num', 0,
            '4Num', 0,
            '5Num', 0,
            '6Num', 0,
            '7Num', 0,
            '8Num', 0,
            '9Num', 0,
            '0Num', 0,
        ]


        if (charLenght > 20) {
            const embed = new Discord.MessageEmbed
            embed.setTitle("Error");
            embed.setDescription("You have exceeded the 20 character limit!");
            embed.setFooter("ReactMessageBot")
            embed.setColor('FF0000')
            message.channel.send(embed)
                .then(msg => msg.delete({ timeout: 6500})).catch(console.error);    
        } else if (charLenght === 0) {
            const embed = new Discord.MessageEmbed
            embed.setTitle("Error");
            embed.setDescription("You need to enter a valid message!");
            embed.setFooter("ReactMessageBot")
            embed.setColor('FF0000')
            message.channel.send(embed)
                .then(msg => msg.delete({ timeout: 6500})).catch(console.error);    
        } else {
            for (var i = 1; i < charLenght; i++) {
                currentChar = reactChars[i].toLowerCase() + "Num";
                
                if (numVars.includes(currentChar) === true) {
                    charPos = numVars.indexOf(currentChar) + 1;
                    reactCharPos = numVars.indexOf(currentChar);
                    reactCharName = numVars[reactCharPos].slice(0, 1) + numVars[charPos];
                    message.react(charEmojis[reactCharName])
                        
                    /*
                        .then (msg => {
                            msg.delete();
                        })
                   
                        .catch();
                    */
                    numVars[charPos]++;

                } else if (numVars.includes(currentChar) === false) {
                    sendError = true;
                }
            }
        }
        if (sendError === true) {
            const embed = new Discord.MessageEmbed
            embed.setTitle("Error");
            embed.setDescription("You have entered an invalid character!");
            embed.setFooter("ReactMessageBot")
            embed.setColor('FF0000')
            message.channel.send(embed)
                .then(msg => msg.delete({ timeout: 6500})).catch(console.error);    
        }
        
    });
});


// client.login(process.env.TOKEN);
client.login("NjgyNzk3MTM1NjE5ODE3NDg4.XliOYg.r3cSv3k5mQeStDfO3E3jVJnmUmc");
